<!doctype html>
<html lang="en" data-layout="vertical" data-topbar="light" data-sidebar="dark" data-sidebar-size="sm-hover"
    data-sidebar-image="none" data-preloader="disable">

<head>

    <meta charset="utf-8" />
    <title>SBYS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
    <meta content="Themesbrand" name="author" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/SBYS.png">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <script src="//cdn.jsdelivr.net/npm/jquery.marquee@1.5.0/jquery.marquee.min.js" type="text/javascript"></script>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.css" rel="stylesheet" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/owl-carousel/1.3.3/owl.carousel.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/7.2.96/css/materialdesignicons.min.css" />

    <script src="https://momentjs.com/downloads/moment.js"></script>
    <script src="https://momentjs.com/downloads/moment.min.js"></script>
    <script>
        var socketUrl = "ws://78.187.173.201:11280/echo";
    </script>

    <style>
        .avatar-sm {
            height: 3rem;
            width: 3rem
        }

        .job-navbar .dropdown-menu .dropdown-item .avatar-sm {
            height: 2.5rem;
            width: 2.5rem
        }

        .fullscreen-enable [data-toggle=fullscreen] .bx-fullscreen::before {
            content: "\eacb"
        }

        .stretch-card>.card {
            width: 100%;
            min-width: 100%
        }



        /* .owl-carousel .item {
            margin: 3px
        } */

        .owl-carousel .item img {
            /* display: block; */
            width: 100%;
            height: 100%
        }

        /* .owl-carousel .item {
            margin: 3px
        } */

        /* .owl-carousel {
            margin-bottom: 5px;

        }  */

        table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            width: 100%;
            height: 100%;

        }



        td,
        th {
            border: 1px solid #e9e3e3;
            text-align: left;
            overflow: hidden;
            padding: 5px;
        }

        tr:nth-child(even) {
            background-color: #e6e3e3;
        }

        .marquee3 {
            width: auto;
            overflow: hidden;
        }

        .marquee3 span.line {
            /* padding-top: 6px; */
            color: rgb(22, 20, 20);
            /* font-size: xx-large; */
            text-decoration: white;
        }

        #table_div {
            font-size: 5.3vh;
            margin-left: 10px;
            font-weight: bold;

        }



        /* 
        td {
            margin: 0;
            padding: 0;
        } */

        #images {
            height: 100%;

        }

        /* body {
            overflow: hidden;
        } */

        ::-webkit-scrollbar {
            display: none;
            visibility: hidden;
            opacity: 0
        }
    </style>
</head>

<body>

    <div id="removeNotificationModal" class="modal fade zoomIn" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                        id="NotificationModalbtn-close"></button>
                </div>
                <div class="modal-body">
                    <div class="mt-2 text-center">
                        <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
                            colors="primary:#f7b84b,secondary:#f06548" style="width:100px;height:100px"></lord-icon>
                        <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
                            <h4>Are you sure ?</h4>
                            <p class="text-muted mx-4 mb-0">Are you sure you want to remove this Notification ?</p>
                        </div>
                    </div>
                    <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                        <button type="button" class="btn w-sm btn-light" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn w-sm btn-danger" id="delete-notification">Yes, Delete
                            It!</button>
                    </div>
                </div>

            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <div class="app-menu navbar-menu" style="display: none;">
        <div class="navbar-brand-box">
            <button type="button" class="btn btn-sm p-0 fs-20 header-item float-end btn-vertical-sm-hover"
                id="vertical-hover">
                <i class="ri-record-circle-line"></i>
            </button>
        </div>

        <div id="scrollbar">
            <div class="container-fluid">

                <div id="two-column-menu">
                </div>
                <ul class="navbar-nav" id="navbar-nav">
                </ul>
            </div>
        </div>
        <div class="sidebar-background"></div>
    </div>
    <!-- Begin page -->
    <div id="layout-wrapper">

        <div class="container-fluid">
            <div class="row">
                <div id="notfounddiv" style="text-align: center; display: none;">
                    <img src="./assets/images/multiply-cross.svg" alt="" height="700px" class="mt-5">
                    <h2 class="mt-5" style="color: #e21b1b;">Bu Sayfaya Erişim İzniniz Bulunmamaktadır</h2>
                </div>
                <div class="col-xxl-12 col-xxl-12 col-lg-12 col-md-12 col-sm-12 col-12" id="maindiv">


                    <div class="card" style="margin-bottom: 0; margin-top: 1.5vh; ">
                        <div class="card-header" style="padding: 2px; margin-top: 0;">
                            <div class="row">
                                <div class="col-xxl-1 col-xxl-1 col-lg-1 col-md-1 col-sm-1 mt-0 text-center">
                                    <button type="button" class="btn btn-icon btn-topbar  rounded-circle mt-2"
                                        data-toggle="fullscreen">
                                        <img src="assets/images/SBYS.png" alt="" height="70">
                                    </button>
                                </div>

                                <div class="col-xxl-11 col-xxl-11 col-lg-11 col-md-11 col-sm-11 text-center "
                                    style="padding: 0; margin-top: 1.5vh; margin-bottom: 0px">
                                    <h1 style="font-size: 4vh; margin-bottom: 0px; padding-top: 2px ;">KAYSERİ
                                        SARRAFLAR VE KUYUMCULAR
                                        DERNEĞİ</h1>
                                    <h4>Bu mağazada satılan ürünler Kayseri Sarraflar ve Kuyumcular
                                        Derneği
                                        denetimindedir.</h4>
                                </div>
                            </div>
                        </div>
                        <div class="card-body" style="padding: 0; margin-top: 2.5vh;">

                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-6 col-cl-6 col-xxl-6 mb-0"
                                    style="max-height: 750px; overflow: hidden; padding-right: 0;">
                                    <!-- Striped Rows -->
                                    <table id="currencytab" class="table-responsive" style="overflow: hidden;">
                                        <thead>
                                            <tr>
                                                <th scope="col"></th>
                                                <!-- <th scope="col" class="fs-3">Alış</th> -->
                                                <th scope="col" class="fs-3">Satış</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodydeger" style="overflow: hidden;">
                                            <tr id="3d11bf8e-10a4-49a0-a3fd-6e6d4f868f9b"
                                                data-id="3d11bf8e-10a4-49a0-a3fd-6e6d4f868f9b" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="1">

                                                    <div id="table_div" data-id="HAS" class="liveCurrency"> <i class=""
                                                            id="HAS-icon" data-id="0" style="color: red;"></i><span
                                                            class="table_currency_title " data-id="HAS"> Has</span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="HAS">0</span> ₺
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr id="33472ad8-a94d-4e64-9f9c-7b74a1090b28"
                                                data-id="33472ad8-a94d-4e64-9f9c-7b74a1090b28" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="2">

                                                    <div id="table_div" data-id="22Ayr" class="liveCurrency"> <i
                                                            class="" id="22Ayr-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="22Ayr"> 22 Ayar</span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="22Ayr">0</span> ₺
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr id="ec6f26a4-8f03-44a3-ae5d-1c07f28d8102"
                                                data-id="ec6f26a4-8f03-44a3-ae5d-1c07f28d8102" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="3">

                                                    <div id="table_div" data-id="18Ayr" class="liveCurrency"> <i
                                                            class="" id="18Ayr-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="18Ayr"> 18 Ayar</span>
                                                    </div>
                                                </td>
                                               
                                                <td>
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="18Ayr">0</span> ₺
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr id="6bc167a8-df1b-480e-82ab-ea00947e6e6a"
                                                data-id="6bc167a8-df1b-480e-82ab-ea00947e6e6a" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="4">

                                                    <div id="table_div" data-id="14Ayr" class="liveCurrency"> <i
                                                            class="" id="14Ayr-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="14Ayr"> 14 Ayar</span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="14Ayr">0</span> ₺
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr id="103bb87c-1ccb-42f9-b0be-8322541a03c4"
                                                data-id="103bb87c-1ccb-42f9-b0be-8322541a03c4" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="5">

                                                    <div id="table_div" data-id="8Ayr" class="liveCurrency"> <i class=""
                                                            id="8Ayr-icon" data-id="0" style="color: red;"></i><span
                                                            class="table_currency_title " data-id="8Ayr"> 8 Ayar</span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="8Ayr">0</span> ₺
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr id="f07b4ed1-fbb5-4db1-8226-62bcae9f20be"
                                                data-id="f07b4ed1-fbb5-4db1-8226-62bcae9f20be" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="6">

                                                    <div id="table_div" data-id="GUMUS" class="liveCurrency"> <i
                                                            class="" id="GUMUS-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="GUMUS"> GUMUS</span>
                                                    </div>
                                                </td>
                                                <td>
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="GUMUS">0</span> ₺
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="col-sm-12 col-md-12 col-lg-6 col-cl-6 col-xxl-6 mb-0"
                                    style="max-height: 750px; overflow: hidden; padding-left: 0;">
                                    <!-- Striped Rows -->
                                    <table id="currencytab1" class="table-responsive" style="overflow: hidden;">
                                        <thead>
                                            <tr>
                                                <th scope="col"></th>
                                                <!-- <th scope="col" class="fs-3">Alış</th> -->
                                                <th scope="col" class="fs-3">Satış</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbodydeger1" style="overflow: hidden;">
                                            <tr id="5af7ab3f-ad4f-4b34-a155-0ebe32224de7"
                                                data-id="5af7ab3f-ad4f-4b34-a155-0ebe32224de7" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="1">

                                                    <div id="table_div" data-id="CEYREK" class="liveCurrency"> <i
                                                            class="" id="CEYREK-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="CEYREK"> ÇEYREK</span>
                                                    </div>
                                                </td>
                                                <td style="overflow : hidden">
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="CEYREK">0</span> ₺
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr id="3af01f6b-a4d5-4bf2-834c-a16a9d33d4fb"
                                                data-id="3af01f6b-a4d5-4bf2-834c-a16a9d33d4fb" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="2">

                                                    <div id="table_div" data-id="YARIM" class="liveCurrency"> <i
                                                            class="" id="YARIM-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="YARIM"> YARIM</span>
                                                    </div>
                                                </td>
                                                <!-- <td style="overflow : hidden">
                                                <div id="table_div" class="" style="display : ruby" ><span style="overflow : hidden" class="table_currency_alis" data-id="YARIM">13.833 <img src="./assets/images/svg/crypto-icons/Turkish_lira_symbol_black.svg" alt="" height="30"></span></div>
                                            </td>  -->
                                                <td style="overflow : hidden">
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="YARIM">0</span> ₺
                                                    </div>            
                                                </td>
                                            </tr>
                                            <tr id="f8f0a6e3-5951-4017-943d-4b3baeb2caa8"
                                                data-id="f8f0a6e3-5951-4017-943d-4b3baeb2caa8" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="3">

                                                    <div id="table_div" data-id="TAM(LIRA)" class="liveCurrency"> <i
                                                            class="" id="TAM-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="TAM(LIRA)"> LİRA</span>
                                                    </div>
                                                </td>
                                                <!-- <td style="overflow : hidden">
                                                <div id="table_div" class="" style="display : ruby" ><span style="overflow : hidden" class="table_currency_alis" data-id="TAM(LIRA)">57.309 <img src="./assets/images/svg/crypto-icons/Turkish_lira_symbol_black.svg" alt="" height="30"></span></div>
                                            </td>  -->
                                                <td style="overflow : hidden">
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="TAM">0</span> ₺
                                                    </div>     
                                                </td>
                                            </tr>
                                            <tr id="4726fa4b-bc87-405c-86a8-44ad28fb2108"
                                                data-id="4726fa4b-bc87-405c-86a8-44ad28fb2108" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="4">

                                                    <div id="table_div" data-id="GREMSE (2.5)" class="liveCurrency"> <i
                                                            class="" id="GREMSE-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="GREMSE (2.5)"> Gremse</span>
                                                    </div>
                                                </td>
                                                <!-- <td style="overflow : hidden">
                                                <div id="table_div" class="" style="display : ruby" ><span style="overflow : hidden" class="table_currency_alis" data-id="GREMSE (2.5)">351.395 <img src="./assets/images/svg/crypto-icons/Turkish_lira_symbol_black.svg" alt="" height="30"></span></div>
                                            </td>  -->
                                                <td style="overflow : hidden">
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="GREMSE">0</span> ₺
                                                    </div>   
                                                </td>
                                            </tr>
                                            <tr id="222df401-fb07-4e9f-96d4-27380251c3e5"
                                                data-id="222df401-fb07-4e9f-96d4-27380251c3e5" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="5">

                                                    <div id="table_div" data-id="ATA LIRA(CUMHURIYET)"
                                                        class="liveCurrency"> <i class="" id="ATALIRA-icon"
                                                            data-id="0" style="color: red;"></i><span
                                                            class="table_currency_title "
                                                            data-id="ATA LIRA(CUMHURIYET)"> ATA LİRA</span>
                                                    </div>
                                                </td>
                                                <td style="overflow : hidden">
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="ATALIRA">0</span> ₺
                                                    </div>  
                                                </td>
                                            </tr>
                                            <tr id="d39acddc-dbfb-4467-9c90-ee3f88d7aafd"
                                                data-id="d39acddc-dbfb-4467-9c90-ee3f88d7aafd" class="tbodydegertr"
                                                style="overflow: hidden;">
                                                <td id="6">

                                                    <div id="table_div" data-id="Reşat" class="liveCurrency"> <i
                                                            class="" id="RESAT-icon" data-id="0"
                                                            style="color: red;"></i><span class="table_currency_title "
                                                            data-id="Reşat"> REŞAT</span>
                                                    </div>
                                                </td>
                                                <td style="overflow : hidden">
                                                    <div id="table_div" class="">
                                                        <span class="table_currency_satis" id="RESAT">0</span> ₺
                                                    </div> 
                                                </td>
                                            </tr>


                                        </tbody>
                                    </table>

                                </div>
                                <div class="col-sm-12 col-md-12 col-lg-12 col-cl-12 col-xxl-12 mb-0 "
                                    style="max-height: 750px; margin-top: 5px;">
                                    <div id="testacc"
                                        style="background: #18719b;  font-size: 4.5vh; padding: 7px 1px 1px 1px; margin-bottom: 0; margin-top: 0;  overflow: hidden; color: white; display: flex; justify-content: space-evenly;">

                                        <img src="/uploads/4883a104410b4776bb2fd33bf5579509.svg" alt=""
                                            class="avatar-sm currency_image mt-2" id="currency_image" data-id="EUR">
                                        <span class="currency_title" data-id="EUR">EUR</span>
                                        <span class="currency_alis" data-id="EUR">Alış :</span><span id="eurbuy">0</span>
                                        <span class="currency_satis" data-id="EUR">&nbsp; Satış :</span><span id="eursell">0</span>
                                        &nbsp;<img src="/uploads/1126752e8b3a4930afd7816f397ee294.svg" alt=""
                                            class="avatar-sm currency_image mt-2" id="currency_image" data-id="USD">
                                        <span class="currency_title" data-id="USD">USD</span>
                                        <span class="currency_alis" data-id="USD">Alış :</span><span id="usdbuy">0</span>
                                        <span class="currency_satis" data-id="USD">&nbsp; Satış :</span><span id="usdsell">0</span> &nbsp;
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="marquee4 text-white" id="duyurlardiv"
                            style="background: #bcc7cc; font-size: 4.5vh; padding: 0; margin-bottom: 0; margin-top: 1vh;  overflow: hidden; color: white;">
                            <span></span>
                        </div>

                        <div class="announcementsmarquee text-white" id="announcements"
                            style="background: #bcc7cc; font-size: 4.5vh; padding: 0; margin-bottom: 0; margin-top: 0;  overflow: hidden; color: white;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        
        const mOptions = {
            duration: 10000,
            gap: 550,
            delayBeforeStart: 0,
            direction: 'left'
        };

        const options = {
                duration: 11000,
                gap: 50,
                delayBeforeStart: 0,
                direction: 'left',
                duplicated: true
            };


        var rules;
        var notAuth = false;
        var slipyCurrencies;
        async function renderRules(data) {
            if(notAuth){
                return
            }
            else if(rules == null){
                rules = await getallrules();
                if (rules.statusCode != -99) {
                    prepareMarquee(rules, data);
                } else {
                    $("#notfounddiv").css("display", "");
                    $("#maindiv").css("display", "none")
                    notAuth = true;
                    return
                }
            }
            updateCurrencyMarquee(data);
            rules.data.forEach((rule) => {
                var currencyfk = rule.map.currencyfk;
                var currencyflag = rule.map.currencyflag;
                var currencypk = rule.map.currencypk;
                var currencytitle = rule.map.currencytitle;

                var currencyRuleCurrencyStep = rule.map.ruleStep
                var currencyRuleCode = rule.map.ruleCode;

                var max = rule.map.max;
                var min = rule.map.min;
                var rate = rule.map.rate;
                var rulefk = rule.map.rulefk;
                var rulepk = rule.map.rulepk;
                var status = rule.map.status;
                var step = rule.map.step;
                var type = rule.map.type;
                var value = rule.map.value;
                
                if (type == "1") { //OTO
                    for (var b = 0; b < data.length; b++) {
                        var wsData = data[b];
                        if(wsData.currency == currencytitle){
                            var sellingValue = parseFloat(wsData.sell);
                            sellingValue = getSteppedValue(sellingValue,step );
                            $("#" + currencytitle).html(new Intl.NumberFormat("de-DE").format(sellingValue) );
                            prepareIcon(currencytitle,sellingValue);
                            break;
                        }
                    }
                    
                } else if (type == "2") { //SABİT
                    $("#" + currencytitle).html(new Intl.NumberFormat("de-DE").format(value) )
                } else { //KATSAYI
                    for (var b = 0; b < data.length; b++) {
                        var wsData = data[b];
                        if(wsData.currency == currencyRuleCode){
                            var sellingRuleValue = parseFloat(wsData.sell);
                            sellingRuleValue = getSteppedValue(sellingRuleValue,currencyRuleCurrencyStep)
                            sellingRuleValue = sellingRuleValue * rate;
                            sellingRuleValue = getSteppedValue(sellingRuleValue,step );
                            $("#" + currencytitle).html(new Intl.NumberFormat("de-DE").format(sellingRuleValue) )
                            prepareIcon(currencytitle,sellingRuleValue);
                            break;
                        }
                    }
                }
            })
        }

        function updateCurrencyMarquee(data){
            for (var counter = 0; counter < data.length; counter++) {
                var wsData = data[counter];
                if(wsData.category == "DOVIZ"){
                    try {
                        $("#" + wsData.currency+"sell").html(pad(wsData.sell,7))
                         $("#" + wsData.currency+"buy").html(pad(wsData.buy,7))
                    } catch (error) {
                        console.log(error)
                    }
                   
                }
                
            }
        }

        function prepareMarquee(rules, data){
            var tempSlipyCur = "";
            for (var counter = 0; counter < data.length; counter++) {
                var wsData = data[counter];
                if (wsData.currency == "EUR" || wsData.currency == "USD") {
                    $("#" + wsData.currency.toLowerCase()+"sell").html(wsData.sell)
                    $("#" + wsData.currency.toLowerCase()+"buy").html(wsData.buy)
                }
                for(var secondCounter = 0; secondCounter < rules.allSymbols.length; secondCounter++){
                    var currency = rules.allSymbols[secondCounter];
                    if(wsData.currency == currency.currencyCode ){
                        var currencyIcon = currency.currencyIcon;
                        var currencyCode = currency.currencyCode
                        var currencyvalue = pad(wsData.buy,7);
                        var currencysvalue = pad(wsData.sell,7);
                        tempSlipyCur += `<img src="${currencyIcon}" alt="" class="avatar-sm currency_image" id="currency_image" data-id="${currencyCode}">
                                                <span class="currency_title" data-id="${currencyCode}">${currencyCode}</span>
                                                <span class="currency_alis" data-id="${currencyCode}"> Alış :</span> <span style="width: 60px;" id="${currencyCode}buy">${currencyvalue}</span>
                                                <span class="currency_satis" data-id="${currencyCode}">- Satış :</span><span style="width: 60px;" id="${currencyCode}sell">${currencysvalue}</span>&nbsp;`;
                    }
                }

            }
            //document.getElementById('testacc').innerHTML = fixedCurrHtml
            var currDom = $("#announcements")
            if (currDom.innerHTML != tempSlipyCur) {
                currDom.append(tempSlipyCur);
                currDom.marquee(options);
                // $('#testacc').append(html)

            }

            var announcementsDom = $("#duyurlardiv")
            if (announcementsDom.innerHTML != rules.announcement) {
                announcementsDom.append(rules.announcement);
                announcementsDom.marquee(mOptions);
                // $('#testacc').append(html)

            }
        }

        function pad(num, size) {
            num = num.toString();
            while (num.length < size) num += "0" 
            return num;
        }

        function prepareIcon(currencyTitle,sellingValue){
            var currencyIcon = $("#" +currencyTitle +"-icon");
            var oldVal = parseFloat(currencyIcon.attr("data-id"));
            var change = oldVal > sellingValue ? "mdi mdi-arrow-down-thin text-danger" : "mdi mdi-arrow-up-thin text-success";   
            currencyIcon.removeClass();
            currencyIcon.addClass(change);
            currencyIcon.attr("data-id", sellingValue+""); 
        }

        $(document).ready(function () {
            connectWebSocket();
        });

        async function getallrules() {
            let url = "/AjaxInformation?msg=getallrules&code={code}";
            try {
                let res = await fetch(url);
                //Arules =  res.json();
                return await res.json() 
            } catch (error) {
                console.log(error);
            }
        }

        setInterval(function () {getallrules()}, 500000);
        

        function getSteppedValue(val, step) {
            val = parseFloat(val);
            var mod = val % step;
            var yuvarla = step - mod;
            if (yuvarla <= (step / 2)) {
                val = val + yuvarla;
            } else {
                val = val - mod;
            }

            return Math.round((val * 100)) / 100;
        }

        function parsePrices(rawData) {
            var fieldData = [
                {
                    index: 0,
                    key: "currency",
                },
                {
                    index: 1,
                    key: "category",
                },
                {
                    index: 3,
                    key: "buy",
                },
                {
                    index: 4,
                    key: "sell",
                },
            ];
            var rows = [];
            rawData.split("\r\n").map((row) => {
                var fields = row.split(";");
                //console.log(fields)
                var parsedData = {};
                fieldData.map(function (d) {
                    parsedData[d.key] = fields[d.index];
                });
                rows.push(parsedData);
            });
            return rows;
        }

        function connectWebSocket() {
            if ("WebSocket" in window) {
                var ws = new WebSocket(socketUrl);

                ws.onerror = function (error) {
                    console.log("error ws", error);
                };

                ws.onopen = function () {
                    console.log("connected forex socket");
                };

                ws.onmessage = function (evt) {

                    var received_msg = evt.data;
                    var data = parsePrices(received_msg);
                    renderRules(data); //proccess the message
                  
                };

                ws.onclose = function () {
                    console.log("closed");
                };
            } else {
                console.log("WebSocket NOT supported by your Browser!");
            }
        }
    </script>
    <!-- JAVASCRIPT -->
    <!-- <script src="/assets/js/prices.js"></script> -->
    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/libs/feather-icons/feather.min.js"></script>
    <script src="assets/libs/node-waves/waves.min.js"></script>
    <script src="assets/js/app.js"></script>
</body>

</html>